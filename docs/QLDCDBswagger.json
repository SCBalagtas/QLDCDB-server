{ "openapi":"3.0.0",
    "info":{ 
        "title":"CAB230 :Web Computing API (QLDCDB)",
        "description":"This API is the server-side component of the CAB230 assignment for Semester 1, 2019",
        "version":"1.0.0"
    },
    "servers":[ 
        {
            "url":"https://localhost"
        }
    ],
    "basePath":"/",
    "tags":[
        { 
          "name":"Authentication"
        },
        { 
          "name":"Search"
        },
        { 
          "name":"Helpers"
        }
    ],
    "paths":{ 
        "/register":{ 
            "post":{ 
                "tags":["Authentication"],
                "summary":"Registers a new user account",
                "description":"This is the starting point apparently",
                "operationId":"registerUser",
                "produces":["application/json"],
                "requestBody":{
                    "required":true,
                    "content":{
                        "application/json":{
                            "schema":{
                                "type":"object",
                                "properties":{
                                    "email":{
                                        "type":"string",
                                        "example":"demo-user@gmail.com",
                                        "required":true
                                    },
                                    "password":{
                                        "type":"string",
                                        "example":"demouserpassword",
                                        "required":true
                                    }
                                },
                                "example":{
                                    "email":"demo-user@gmail.com",
                                    "password":"demouserpassword"
                                }
                            }
                        }
                    }
                },
                "responses":{
                    "201":{
                        "description":"Created",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "message":{
                                            "type":"string"
                                        }
                                    }
                                },
                                "example":{
                                    "message":"Account successfully registered"
                                }
                            }
                        }
                    },
                    "400":{
                        "description":"Bad Request",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "message":{
                                            "type":"string"
                                        }
                                    }
                                },
                                "example":{
                                    "message":"Error: Account with this email already exists"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/login":{ 
            "post":{ 
                "tags":["Authentication"],
                "summary":"Login with an existing user account",
                "operationId":"loginUser",
                "produces":["application/json"],
                "requestBody":{
                    "required":true,
                    "content":{
                        "application/json":{
                            "schema":{
                                "type":"object",
                                "properties":{
                                    "email":{
                                        "type":"string",
                                        "example":"demo-user@gmail.com",
                                        "required":true
                                    },
                                    "password":{
                                        "type":"string",
                                        "example":"demouserpassword",
                                        "required":true
                                    }
                                },
                                "example":{
                                    "email":"demo-user@gmail.com",
                                    "password":"demouserpassword"
                                }
                            }
                        }
                    }
                },
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "token":{
                                            "type":"string"
                                        },
                                        "access_token":{
                                            "type":"string"
                                        },
                                        "token_type":{
                                            "type":"string"
                                        },
                                        "expires_in":{
                                            "type":"integer"
                                        }
                                    }
                                },
                                "example":{
                                    "token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjo1Nzg2LCJlbWFpbCI6ImRlbW8xMjM0QGdtYWlsLmNvbSJ9LCJpYXQiOjE1NTUzMjQ2MDIsImV4cCI6MTU1NTQxMTAwMn0.mo85iKuAQ_h8n8-6pkeNNs5CCnV0G8hScxhi_ml_Q6c",
                                    "access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7ImlkIjo1Nzg2LCJlbWFpbCI6ImRlbW8xMjM0QGdtYWlsLmNvbSJ9LCJpYXQiOjE1NTUzMjQ2MDIsImV4cCI6MTU1NTQxMTAwMn0.mo85iKuAQ_h8n8-6pkeNNs5CCnV0G8hScxhi_ml_Q6c",
                                    "token_type":"Bearer",
                                    "expires_in":86400
                                }
                            }
                        }
                    },
                    "401":{
                        "description":"Unauthorised",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "message":{
                                            "type":"string"
                                        }
                                    }
                                },
                                "example":{
                                    "message":"Invalid login - incorrect email or password"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/search":{ 
            "get":{
                "tags":["Search"],
                "description":"Search for offence data",
                "operationId":"searchOffences",
                "produces":["application/json"],
                "parameters":[{
                    "name":"offence",
                    "in":"query",
                    "description":"Name of the offence to search for",
                    "required":true,
                    "schema":{
                        "type":"string"
                    }
                },
                {
                    "name":"area",
                    "in":"query",
                    "description":"List of comma-separated areas (LGAs) to filter search results by",
                    "required":false,
                    "schema":{
                        "type":"string"
                    }
                },
                {
                    "name":"age",
                    "in":"query",
                    "description":"List of comma-separated ages to filter search results by",
                    "required":false,
                    "schema":{
                        "type":"string"
                    }
                },
                {
                    "name":"gender",
                    "in":"query",
                    "description":"List of comma-separated genders to filter search results by",
                    "required":false,
                    "schema":{
                        "type":"string"
                    }
                },
                {
                    "name":"year",
                    "in":"query",
                    "description":"List of comma-separated years to filter search results by",
                    "required":false,
                    "schema":{
                        "type":"integer"
                    }
                },
                {
                    "name":"month",
                    "in":"query",
                    "description":"List of comma-separated months to filter search results by",
                    "required":false,
                    "schema":{
                        "type":"integer"
                    }
                }],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "query":{
                                            "type":"object",
                                            "properties":{
                                                "offence":{
                                                    "type":"string"
                                                }
                                            }
                                        },
                                        "result":{
                                            "type":"array",
                                            "items":{
                                                "type":"object",
                                                "properties":{
                                                    "LGA":{
                                                        "type":"string"
                                                    },
                                                    "total":{
                                                        "type":"integer"
                                                    },
                                                    "lat":{
                                                        "type":"integer"
                                                    },
                                                    "lng":{
                                                        "type":"integer"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "example":{
                                    "query":{
                                        "offence":"Homicide (Murder)"
                                      },
                                      "result":[
                                        {
                                          "LGA":"Aurukun Shire Council",
                                          "total":4,
                                          "lat":-27.470812,
                                          "lng":153.022455
                                        }
                                      ]
                                }
                            }
                        }
                    },
                    "400":{
                        "description":"Bad Request",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "message":{
                                            "type":"string"
                                        }
                                    }
                                },
                                "example":{
                                    "message":"Error on request query - you are missing the offence paramter"
                                }
                            }
                        }
                    },
                    "401":{
                        "description":"Unauthorised",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "message":{
                                            "type":"string"
                                        }
                                    }
                                },
                                "example":{
                                    "message":"Error - Your authorization token is invalid"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/offences":{
            "get":{
                "tags":["Helpers"],
                "description":"List of offences to perform searches for",
                "operationId":"getOffences",
                "produces":["application/json"],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "offences":{
                                            "type":"array",
                                            "items":{
                                                "type":"string"
                                            }
                                        }
                                    }
                                },
                                "example":{
                                    "offences":[
                                        "Advertising Prostitution",
                                        "Armed Robbery"
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/areas":{
            "get":{
                "tags":["Helpers"],
                "description":"List of areas to filter search results by",
                "operationId":"getAreas",
                "produces":["application/json"],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "areas":{
                                            "type":"array",
                                            "items":{
                                                "type":"string"
                                            }
                                        }
                                    }
                                },
                                "example":{
                                    "areas":[
                                        "Aurukun Shire Council",
                                        "Balonne Shire Council"
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/ages":{
            "get":{
                "tags":["Helpers"],
                "description":"List of ages to filter search results by",
                "operationId":"getAges",
                "produces":["application/json"],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "ages":{
                                            "type":"array",
                                            "items":{
                                                "type":"string"
                                            }
                                        }
                                    }
                                },
                                "example":{
                                    "ages":[
                                        "Adult",
                                        "Juvenile"
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/genders":{
            "get":{
                "tags":["Helpers"],
                "description":"List of genders to filter search results by",
                "operationId":"getGenders",
                "produces":["application/json"],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "genders":{
                                            "type":"array",
                                            "items":{
                                                "type":"string"
                                            }
                                        }
                                    }
                                },
                                "example":{
                                    "genders":[
                                        "Female",
                                        "Male"
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/years":{
            "get":{
                "tags":["Helpers"],
                "description":"List of years to filter search results by",
                "operationId":"getYears",
                "produces":["application/json"],
                "responses":{
                    "200":{
                        "description":"OK",
                        "content":{
                            "apllication/json":{
                                "schema":{
                                    "type":"object",
                                    "properties":{
                                        "years":{
                                            "type":"array",
                                            "items":{
                                                "type":"integer"
                                            }
                                        }
                                    }
                                },
                                "example":{
                                    "years":[
                                        2001,
                                        2002
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
                